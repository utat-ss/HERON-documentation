

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MOb Allocation &mdash; UTAT Space Systems Documentation 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SPI (Serial Peripheral Interface)" href="spi.html" />
    <link rel="prev" title="Message Objects (MObs)" href="can-mobs.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> UTAT Space Systems Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/rtsys.html">Real-Time Embedded Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/avr-toolchain.html">The AVR Toolchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/install.html">Software Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/install-mac.html">Software Installation - macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/install-win.html">Software Installation - Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/install-linux.html">Software Installation - Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/atmega32m1.html">The ATMega32M1 Microcontroller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/hello-world.html">Hello World ATMega32M1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/git-and-github.html">Git and Github</a></li>
</ul>
<p class="caption"><span class="caption-text">Software and Programming</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../software-and-programming.html">Software and Programming</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../software-tools/software-workflow.html">Software Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software-tools/test-harness.html">Test Harness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software-tools/our_toolchain.html">Our Toolchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software-tools/lib-common.html">lib-common</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software-tools/lib-common.html#switch-lib-common-to-a-different-branch">Switch lib-common to a Different Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software-tools/uart-terminal.html">UART Terminal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../embedded/microcontrollers.html">Microcontrollers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../embedded/registers.html">Registers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../embedded/interrupts.html">Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../embedded/avr-fuses.html">AVR Fuses</a></li>
<li class="toctree-l2"><a class="reference internal" href="communication-protocols.html">Communication Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="can.html">CAN (Controller Area Network)</a></li>
<li class="toctree-l2"><a class="reference internal" href="can-mobs.html">Message Objects (MObs)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">MOb Allocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="spi.html">SPI (Serial Peripheral Interface)</a></li>
<li class="toctree-l2"><a class="reference internal" href="spi-bus.html">SPI Bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="spi-using-spi.html">Using our SPI Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="uart.html">UART (Universal Asynchronous Receiver Transmitter)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/introduction.html">C Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/operators.html">Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/bitwise-operators.html">Bitwise Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/control-structures.html">Control Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/header-files.html">Header Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/header-files.html#define">#define</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/header-files.html#typedef">typedef</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/pointers.html">Pointers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/structs.html">Structs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/c_h_files.html"><code class="docutils literal"><span class="pre">.c</span></code> and <code class="docutils literal"><span class="pre">.h</span></code> Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/binary-hex-literals.html">Binary (0b) and Hexadecimal (0x) Literals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/integer-types.html">Integer Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/print-formatting.html">Print Formatting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-programming/volatile-variables.html">Volatile Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style-guide/style-guide.html">Software Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style-guide/technical.html">Technical</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style-guide/formatting.html">Formatting</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Electronics and Altium</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../electronics-and-altium.html">Electronics and Altium</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">UTAT Space Systems Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../software-and-programming.html">Software and Programming</a> &raquo;</li>
        
      <li>MOb Allocation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/communication-protocols/can-mob-allocation.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mob-allocation">
<span id="mob-allocation"></span><h1>MOb Allocation<a class="headerlink" href="#mob-allocation" title="Permalink to this headline">¶</a></h1>
<p>The limited number of CAN Message Objects that can be created on the ATmega32M1 (only 6) requires us to strictly allocate the purpose of each MOb. The allocation is done under the following assumptions:</p>
<ul class="simple">
<li>No MOb shall be reinitialized or renamed</li>
<li>Only three subsystem microcontrollers are used, referred to as OBC, EPS and PAY</li>
<li>EPS and PAY do not communicate with each other</li>
<li>A message cannot have multiple recipients, but multiple senders can send to the same MOb</li>
<li>No two MObs on the bus can have the same ID</li>
</ul>
<p>The MOb names are with respect to the OBC (e.g. STATUS_TX is transmitted from the OBC, STATUS_RX is received on the OBC).</p>
<p>| # | Name | OBC (00) | EPS (10) | PAY (01) |
| :— | :— | :— | :— | :— |
| 0 | <code class="docutils literal"><span class="pre">STATUS_Tx_MOb</span></code> | Tx | Rx | Rx |
| 1 | <code class="docutils literal"><span class="pre">STATUS_Rx_MOb</span></code> | Rx | Tx | Tx |
| 2 | <code class="docutils literal"><span class="pre">CMD_Rx_MOb</span></code> | Rx | Tx | Tx || 3 | <code class="docutils literal"><span class="pre">PAY_CMD_Tx_MOb</span></code> | Tx | N/A | Rx || 4 | <code class="docutils literal"><span class="pre">EPS_CMD_Tx_MOb</span></code> | Tx | Rx | N/A || 5 | <code class="docutils literal"><span class="pre">DATA_Rx_MOb</span></code>| Rx | Tx | Tx |</p>
<p>The Message ID of every message is structured as the following:</p>
<p>| Bit | 10-9 | 8-3 | 2-1 | 0 |
| :— | :— | :— | :— | :—
| | Receiver ID | <code class="docutils literal"><span class="pre">_BV(MOb</span> <span class="pre">#)</span></code> | Sender ID | Rx/T̅̅x |</p>
<p>The Receiver and Sender IDs are 00 for OBC, 01 for PAY, and 10 for EPS.</p>
<p>Bits 8-3 are used to encode the universal MOb number, 0-5, in one-hot encoding. The <code class="docutils literal"><span class="pre">_BV(MOb</span> <span class="pre">#)</span></code> macro simply means <code class="docutils literal"><span class="pre">000000001</span> <span class="pre">&lt;&lt;</span> <span class="pre">MOb</span> <span class="pre">#</span></code>. So, if <code class="docutils literal"><span class="pre">MOb</span> <span class="pre">#</span> <span class="pre">=</span> <span class="pre">5</span></code>, the value of bits 8-3 would be <code class="docutils literal"><span class="pre">100000</span></code>, and for <code class="docutils literal"><span class="pre">MOb</span> <span class="pre">#</span> <span class="pre">=</span> <span class="pre">2</span></code> it would be <code class="docutils literal"><span class="pre">000100</span></code>.</p>
<p>Bit 0 is 0 if it is a Tx mailbox, or 1 if it is an Rx mailbox.</p>
<p>This allows a single universal mask to be valid for all mailboxes:
<code class="docutils literal"><span class="pre">MOb_Mask</span> <span class="pre">=</span> <span class="pre">111</span> <span class="pre">1111</span> <span class="pre">1000</span></code>.
This allows selectivity in Receiver ID and MOb #, while remaining sender-agnostic.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="spi.html" class="btn btn-neutral float-right" title="SPI (Serial Peripheral Interface)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="can-mobs.html" class="btn btn-neutral" title="Message Objects (MObs)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, University of Toronto Aerospace Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>